<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/favicon.ico">
    <title>Survey</title>
    <!-- Bootstrap core CSS -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Audiowide|Orbitron|Quantico|Share+Tech+Mono|VT323" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link rel="stylesheet" type="text/css" href="/ff.css" />
</head>

<body>
<!--     <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Project name</a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav> -->
    <div class="container">
        <div class="starter-template">
            <h1>Replicant Friend Finder</h1>
            <h2>Voight-Kampff Quiz</h2>
            <p class="lead">Capillary dilation of the so-called blush response...<br/>fluctuation of the pupil... involuntary dilation of the iris.                     <button id="all" type="submit" class="btn btn-info pull-right"><span class="glyphicon glyphicon-user"></span> View All Replicant Models</button>
            </p>
        </div>
        <div class="wrap">
            <form role="form" action="" id="Voight-Kampff">
                <div class="form-group">
                    <label for="">Name</label>
                    <input type="text" class="form-control" id="name" required>
                </div>
                <div class="form-group">
                    <label for="">Photo URL</label>
                    <input type="text" class="form-control" id="photo" required>
                </div>
                <label class="statement">Its your birthday. Someone gives you a calfskin wallet. How do you react?</label>
                <ul class='likert'>
                    <li>
                        <input type="radio" name="calfskin" value="1">
                        <label>Extreme Disgust</label>
                    </li>
                    <li>
                        <input type="radio" name="calfskin" value="2">
                        <label>Mild Distress</label>
                    </li>
                    <li>
                        <input type="radio" name="calfskin" value="3">
                        <label>Neutral Interest</label>
                    </li>
                    <li>
                        <input type="radio" name="calfskin" value="4">
                        <label>Mild Happiness</label>
                    </li>
                    <li>
                        <input type="radio" name="calfskin" value="5">
                        <label>Extreme Delight</label>
                    </li>
                </ul>
                <label class="statement">You’ve got a little boy. He shows you his butterfly collection plus the killing jar.</label>
                <ul class='likert'>
                    <li>
                        <input type="radio" name="butterfly" value="1">
                        <label>Extreme Disgust</label>
                    </li>
                    <li>
                        <input type="radio" name="butterfly" value="2">
                        <label>Mild Distress</label>
                    </li>
                    <li>
                        <input type="radio" name="butterfly" value="3">
                        <label>Neutral Interest</label>
                    </li>
                    <li>
                        <input type="radio" name="butterfly" value="4">
                        <label>Mild Happiness</label>
                    </li>
                    <li>
                        <input type="radio" name="butterfly" value="5">
                        <label>Extreme Delight</label>
                    </li>
                </ul>
                <label class="statement">You’re watching television. Suddenly you realize there’s a wasp crawling on your arm.</label>
                <ul class='likert'>
                    <li>
                        <input type="radio" name="tv" value="1">
                        <label>Extreme Disgust</label>
                    </li>
                    <li>
                        <input type="radio" name="tv" value="2">
                        <label>Mild Distress</label>
                    </li>
                    <li>
                        <input type="radio" name="tv" value="3">
                        <label>Neutral Interest</label>
                    </li>
                    <li>
                        <input type="radio" name="tv" value="4">
                        <label>Mild Happiness</label>
                    </li>
                    <li>
                        <input type="radio" name="tv" value="5">
                        <label>Extreme Delight</label>
                    </li>
                </ul>
                <label class="statement">You’re in a desert walking along in the sand when all of the sudden you look down, and you see a tortoise, it’s crawling toward you. You reach down, you flip the tortoise over on its back. The tortoise lays on its back, its belly baking in the hot sun, beating its legs trying to turn itself over, but it can’t, not without your help. But you’re not helping.</label>
                <ul class='likert'>
                    <li>
                        <input type="radio" name="tortise" value="1">
                        <label>Extreme Disgust</label>
                    </li>
                    <li>
                        <input type="radio" name="tortise" value="2">
                        <label>Mild Distress</label>
                    </li>
                    <li>
                        <input type="radio" name="tortise" value="3">
                        <label>Neutral Interest</label>
                    </li>
                    <li>
                        <input type="radio" name="tortise" value="4">
                        <label>Mild Happiness</label>
                    </li>
                    <li>
                        <input type="radio" name="tortise" value="5">
                        <label>Extreme Delight</label>
                    </li>
                </ul>
                <label class="statement">Describe in words, only the good things that come into your mind about your mother.</label>
                <ul class='likert'>
                    <li>
                        <input type="radio" name="mother" value="1">
                        <label>Extreme Disgust</label>
                    </li>
                    <li>
                        <input type="radio" name="mother" value="2">
                        <label>Mild Distress</label>
                    </li>
                    <li>
                        <input type="radio" name="mother" value="3">
                        <label>Neutral Interest</label>
                    </li>
                    <li>
                        <input type="radio" name="mother" value="4">
                        <label>Mild Happiness</label>
                    </li>
                    <li>
                        <input type="radio" name="mother" value="5">
                        <label>Extreme Delight</label>
                    </li>
                </ul>
                <label class="statement">You're reading a novel written in the old days before the war. The characters are visiting Fisherman's Wharf in San Francisco. They become hungry and enter a seafood restaurant. One of them orders lobster, and the chef drops the lobster into the tub of boiling water while the characters watch.</label>
                <ul class='likert'>
                    <li>
                        <input type="radio" name="lobster" value="1">
                        <label>Extreme Disgust</label>
                    </li>
                    <li>
                        <input type="radio" name="lobster" value="2">
                        <label>Mild Distress</label>
                    </li>
                    <li>
                        <input type="radio" name="lobster" value="3">
                        <label>Neutral Interest</label>
                    </li>
                    <li>
                        <input type="radio" name="lobster" value="4">
                        <label>Mild Happiness</label>
                    </li>
                    <li>
                        <input type="radio" name="lobster" value="5">
                        <label>Extreme Delight</label>
                    </li>
                </ul>
                <label class="statement">You're reading a magazine. You come across a full-page nude photo. You show it to your partner. They like it so much, they hang it on your bedroom wall.</label>
                <ul class='likert'>
                    <li>
                        <input type="radio" name="nude" value="1">
                        <label>Extreme Disgust</label>
                    </li>
                    <li>
                        <input type="radio" name="nude" value="2">
                        <label>Mild Distress</label>
                    </li>
                    <li>
                        <input type="radio" name="nude" value="3">
                        <label>Neutral Interest</label>
                    </li>
                    <li>
                        <input type="radio" name="nude" value="4">
                        <label>Mild Happiness</label>
                    </li>
                    <li>
                        <input type="radio" name="nude" value="5">
                        <label>Extreme Delight</label>
                    </li>
                </ul>
                <label class="statement">You're watching a stage play - a banquet is in progress. The guests are enjoying an appetizer of raw oysters. The entree consists of boiled dog.</label>
                <ul class='likert'>
                    <li>
                        <input type="radio" name="dog" value="1">
                        <label>Extreme Disgust</label>
                    </li>
                    <li>
                        <input type="radio" name="dog" value="2">
                        <label>Mild Distress</label>
                    </li>
                    <li>
                        <input type="radio" name="dog" value="3">
                        <label>Neutral Interest</label>
                    </li>
                    <li>
                        <input type="radio" name="dog" value="4">
                        <label>Mild Happiness</label>
                    </li>
                    <li>
                        <input type="radio" name="dog" value="5">
                        <label>Extreme Delight</label>
                    </li>
                </ul>
                            
                <label class="statement">Do you like our owl?</label>
                <div class="img col-centered" style="background-image:url('/images/171-0321110023-Blade-Runner-owl.jpg');"></div>
                <ul class='likert'>
                    <li>
                        <input type="radio" name="owl" value="1">
                        <label>Extreme Disgust</label>
                    </li>
                    <li>
                        <input type="radio" name="owl" value="2">
                        <label>Mild Distress</label>
                    </li>
                    <li>
                        <input type="radio" name="owl" value="3">
                        <label>Neutral Interest</label>
                    </li>
                    <li>
                        <input type="radio" name="owl" value="4">
                        <label>Mild Happiness</label>
                    </li>
                    <li>
                        <input type="radio" name="owl" value="5">
                        <label>Extreme Delight</label>
                    </li>
                </ul>
                <label class="statement">Assuming androids do dream of electric sheep, how do you feel about it?</label>
                <ul class='likert'>
                    <li>
                        <input type="radio" name="sheep" value="1">
                        <label>Extreme Disgust</label>
                    </li>
                    <li>
                        <input type="radio" name="sheep" value="2">
                        <label>Mild Distress</label>
                    </li>
                    <li>
                        <input type="radio" name="sheep" value="3">
                        <label>Neutral Interest</label>
                    </li>
                    <li>
                        <input type="radio" name="sheep" value="4">
                        <label>Mild Happiness</label>
                    </li>
                    <li>
                        <input type="radio" name="sheep" value="5">
                        <label>Extreme Delight</label>
                    </li>
                </ul>
                <div class="buttons">
                    <!--       <button class="clear">Clear</button>
 -->
                    <button type="submit" class="btn btn-primary btn-lg submit">Submit</button>
                </div>
            </form>
        </div>
    </div>
    <!-- /.container -->
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- Link to the jQuery Library -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <!-- Modal -->
    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title text-center">Your Replicant Friend Match has been Detected!</h3>
                </div>
                <div class="divider"></div>
                <br/>
                <div class="row text-center">
                    <div class="col-md-1"></div>
                    <div class="col-md-5">
                        <h4 class="text-center">You</h4>
                        <div class="thumbnail">
                            <div id="userPhoto" class="img col-centered" style=""></div>
                            <h5 id="userName" class="text-center"></h5>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <h4 class="text-center">Your Match</h4>
                        <div class="thumbnail">
                            <div id="userMatchImage" class="img col-centered" style=""></div>
                            <h5 id="userMatch" class="text-center"></h5>
                        </div>
                    </div>
                    <div class="col-md-1"></div>
                </div>
                <!--                                 <h5 id="userMatch"></h5>
                <img id="userMatchImage" width="250px" src=""> -->
                <div class="modal-footer text-center">
                    <button id="all" type="submit" class="btn btn-info"><span class="glyphicon glyphicon-user"></span> View All Replicant Models</button>

                    <button id="reboot" type="submit" class="btn btn-success"><span class="glyphicon glyphicon-refresh"></span> Reboot VK Analyzer</button>
                    <!--                 <a href="/survey" class="">Fill Again!</a>
 --></div>
            </div>
        </div>
    </div>
    <script type="text/javascript">

    $('#reboot').click(function() {
        window.location.href = '/survey';
    });

    $('#all').click(function() {
        window.location.href = '/all';
    });


    $(".submit").on("click", function(event) {
        event.preventDefault();

        // Here we grab the form elements
        var newFriend = {
            name: $('#name').val().trim(),
            photo: $('#photo').val().trim(),
            scores: [
                $('input:radio[name=calfskin]:checked').val(),
                $('input:radio[name=butterfly]:checked').val(),
                $('input:radio[name=tv]:checked').val(),
                $('input:radio[name=tortise]:checked').val(),
                $('input:radio[name=mother]:checked').val(),
                $('input:radio[name=lobster]:checked').val(),
                $('input:radio[name=nude]:checked').val(),
                $('input:radio[name=dog]:checked').val(),
                $('input:radio[name=owl]:checked').val(),
                $('input:radio[name=sheep]:checked').val()
            ]
        };

        console.log(newFriend);

        // This line is the magic. It's very similar to the standard ajax function we used.
        // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
        // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
        // depending on if a tables is available or not.

        // Here we get the location of the root page.
        // We use this instead of explicitly saying the URL is localhost:3001 because the url will change when we deploy.
        var currentURL = window.location.origin;

        $.post(currentURL + "/api/friends", newFriend,
            function(data) {

                // Clear the form when submitting
                $('#name').val("");
                $('#photo').val("");
                $('input[name=calfskin]').attr('checked', false);
                $('input[name=butterfly]').attr('checked', false);
                $('input[name=tv]').attr('checked', false);
                $('input[name=tortise]').attr('checked', false);
                $('input[name=mother]').attr('checked', false);
                $('input[name=lobster]').attr('checked', false);
                $('input[name=nude]').attr('checked', false);
                $('input[name=dog]').attr('checked', false);
                $('input[name=owl]').attr('checked', false);
                $('input[name=sheep]').attr('checked', false);

                // Set the name and image values of friend match
                $('#userMatch').html(data.matchName);
                $("#userMatchImage").attr("style", "background-image:url('" + data.matchImage + "');");
                $('#userName').html(data.userName);
                // $("#userPhoto").attr("src", data.userPhoto);
                $("#userPhoto").attr("style", "background-image:url('" + data.userPhoto + "');");

                // Pop open the modal dialog
                $('#myModal').modal('show');


            });



    });

    </script>
</body>

</html>
